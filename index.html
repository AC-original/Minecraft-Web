<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Minecraft 1.8.8</title>
<link rel="icon" href="icon.ico">
<style>
html,body{margin:0;height:100%;background:#000;overflow:hidden;display:flex;justify-content:center;align-items:center}
#game_frame,#intro{position:absolute;inset:0;display:flex;justify-content:center;align-items:center}
#intro{max-width:100%;max-height:100%;z-index:10;display:none}
#game_frame{z-index:0;display:none}
button{position:absolute;cursor:pointer;font-weight:bold;border:none;border-radius:12px;padding:1em 2em;transition:.2s}
#start_game{z-index:11;background:#fff;color:#000;font-size:1.2rem}
#start_game:hover{transform:scale(1.05);box-shadow:0 4px 15px rgba(0,0,0,.3)}
</style>
</head>
<body>
<div id="game_frame"></div>
<video id="intro"><source src="intro.mp4" type="video/mp4"></video>
<button id="start_game">Lancer le jeu</button>

<script>
"use strict";
window.addEventListener("DOMContentLoaded",()=>{
const v=document.getElementById("intro"),b=document.getElementById("start_game"),g=document.getElementById("game_frame");
let wait=false,started=false,old=console.log;
console.log=(...a)=>{old(...a);if(wait&&a.some(x=>x?.includes?.("WebAssembly direct memory resized"))){wait=false;v.onended=()=>{v.remove();g.style.display="flex"}}};
b.onclick=async()=>{if(started)return;started=true;b.remove();v.style.display="flex";try{await v.play()}catch{}wait=true;load()};
async function load(){
let r=Math.floor(Math.random()*3),o={container:"game_frame",worldsDB:"worlds",relays:[{addr:"wss://relay.deev.is/",primary:r==0},{addr:"wss://relay.lax1dude.net/",primary:r==1},{addr:"wss://relay.shhnowisnottheti.me/",primary:r==2}],assetsURI:"assets.epw"};
let buf;try{buf=await fetch(o.assetsURI,{cache:"force-cache"}).then(r=>r.arrayBuffer())}catch{return};let d=new DataView(buf);
if(d.getUint32(0,true)!=608649541||d.getUint32(4,true)!=1297301847)return;
let js=new Blob([new Uint8Array(buf,d.getUint32(164,true),d.getUint32(168,true))],{type:"text/javascript"}),
    wasm=new Blob([new Uint8Array(buf,d.getUint32(180,true),d.getUint32(184,true))],{type:"application/wasm"});
window.__eaglercraftXLoaderContextPre={rootElement:g,eaglercraftXOpts:{...o,container:undefined,assetsURI:undefined},theEPWFileBuffer:buf,loaderWASMURL:URL.createObjectURL(wasm)};
let s=document.createElement("script");s.src=URL.createObjectURL(js);document.head.appendChild(s);
}
});
</script>
</body>
</html>
